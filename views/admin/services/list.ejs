<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AMS Admin - Services</title>
    <link rel="stylesheet" href="/css/admin/main.css">
</head>
<body>
    <div class="admin-layout">
        <%- include('../partials/sidebar') %>

        <main class="admin-main">
            <header class="admin-header">
                <h1>Services</h1>
                <a href="/admin/services/add" class="btn-primary">+ Add Service</a>
            </header>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Name</th>
                        <th>Price</th>
                        <th>Duration</th>
                        <th>Category</th>
                        <th>Points</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% services.forEach(service => { %>
                        <tr>
                            <td><img src="<%= service.image %>" alt="<%= service.name %>" class="table-img"></td>
                            <td><%= service.name %></td>
                            <td>â‚±<%= service.price %></td>
                            <td><%= service.duration %> mins</td>
                            <td>
                                <% 
                                const validCategories = ['hair', 'skin', 'nails', 'spa', 'other'];
                                const displayCategory = validCategories.includes(service.category) 
                                    ? service.category.charAt(0).toUpperCase() + service.category.slice(1)
                                    : 'Other';
                                %>
                                <%= displayCategory %>
                            </td>
                            <td><%= service.pointsEarned %> pts</td>
                            <td>
                                <span class="status-badge <%= service.isActive ? 'active' : 'inactive' %>">
                                    <%= service.isActive ? 'Active' : 'Inactive' %>
                                </span>
                            </td>
                            <td class="actions">
                                <a href="/admin/services/<%= service._id %>/edit" class="btn-sm btn-secondary">Edit</a>
                                <% if (service.isActive) { %>
                                    <form action="/admin/services/<%= service._id %>/deactivate" method="POST" class="inline-form">
                                        <button type="submit" class="btn-sm btn-danger">Deactivate</button>
                                    </form>
                                <% } %>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        </main>
    </div>
</body>
</html>
